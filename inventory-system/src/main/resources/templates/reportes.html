<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes - GMT Inventory</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="/">üè≠ GMT Inventory</a>
        <div class="navbar-nav">
            <a class="nav-link" href="/">Dashboard</a>
            <a class="nav-link" href="/productos">Productos</a>
            <a class="nav-link" href="/movimientos">Movimientos</a>
            <a class="nav-link active" href="/reportes">Reportes</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <h4>üìä Reportes del Sistema</h4>

    <!-- Productos con bajo stock -->
    <div class="card mb-4">
        <div class="card-header bg-warning text-dark">
            <h5>‚ö† Productos con Stock Bajo</h5>
        </div>
        <div class="card-body">
            <div th:if="${productosBajoStock.empty}" class="text-center text-muted">
                ‚úÖ No hay productos con stock bajo
            </div>
            <div th:unless="${productosBajoStock.empty}">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Referencia</th>
                            <th>Nombre</th>
                            <th>Categor√≠a</th>
                            <th>Stock Actual</th>
                            <th>Stock M√≠nimo</th>
                            <th>Proveedor</th>
                            <th>D√©ficit</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="producto : ${productosBajoStock}">
                            <td th:text="${producto.referencia}"></td>
                            <td th:text="${producto.nombre}"></td>
                            <td th:text="${producto.categoria}"></td>
                            <td>
                                <span class="badge bg-warning" th:text="${producto.cantidadStock}"></span>
                            </td>
                            <td th:text="${producto.stockMinimo}"></td>
                            <td th:text="${producto.proveedor}"></td>
                            <td>
                                        <span class="badge bg-danger"
                                              th:text="${producto.stockMinimo - producto.cantidadStock} + ' unidades'">
                                        </span>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Acciones de reportes -->
    <div class="row">
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-body">
                    <h5>üìã Inventario Completo</h5>
                    <p class="text-muted">Exportar lista completa de productos</p>
                    <button class="btn btn-outline-primary" onclick="exportarInventario()">
                        üì• Exportar a Excel
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-body">
                    <h5>üìà Movimientos</h5>
                    <p class="text-muted">Reporte de movimientos por fecha</p>
                    <button class="btn btn-outline-success" onclick="exportarMovimientos()">
                        üì• Exportar Movimientos
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-body">
                    <h5>üö® Alertas</h5>
                    <p class="text-muted">Reporte de productos cr√≠ticos</p>
                    <button class="btn btn-outline-warning" onclick="exportarAlertas()">
                        üì• Exportar Alertas
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Estad√≠sticas r√°pidas -->
    <div class="card mt-4">
        <div class="card-header">
            <h5>üìà Estad√≠sticas R√°pidas</h5>
        </div>
        <div class="card-body">
            <div class="row text-center">
                <div class="col-md-3">
                    <h6>Total Productos</h6>
                    <h3 th:text="${productosBajoStock.size() + ' / ' + totalProductos}"></h3>
                    <small class="text-muted">Bajo Stock / Total</small>
                </div>
                <div class="col-md-3">
                    <h6>Estado General</h6>
                    <h3 th:if="${productosBajoStock.empty}" class="text-success">‚úÖ √ìptimo</h3>
                    <h3 th:unless="${productosBajoStock.empty}" class="text-warning">‚ö† Atenci√≥n</h3>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function exportarInventario() {
        alert('üìä Funci√≥n de exportaci√≥n de inventario - Pr√≥ximamente');
    }

    function exportarMovimientos() {
        alert('üìà Funci√≥n de exportaci√≥n de movimientos - Pr√≥ximamente');
    }

    function exportarAlertas() {
        alert('üö® Funci√≥n de exportaci√≥n de alertas - Pr√≥ximamente');
    }
</script>
</body>
</html>